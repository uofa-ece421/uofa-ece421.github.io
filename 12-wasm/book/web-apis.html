<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Web APIs - Web Development</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="www.html"><strong aria-hidden="true">1.</strong> The World Wide Web</a></li><li class="chapter-item expanded "><a href="web-apis.html" class="active"><strong aria-hidden="true">2.</strong> Web APIs</a></li><li class="chapter-item expanded "><a href="server.html"><strong aria-hidden="true">3.</strong> Web Servers</a></li><li class="chapter-item expanded "><a href="wasm.html"><strong aria-hidden="true">4.</strong> Web Assembly</a></li><li class="chapter-item expanded "><a href="sexpr.html"><strong aria-hidden="true">5.</strong> S-expressions</a></li><li class="chapter-item expanded "><a href="rust.html"><strong aria-hidden="true">6.</strong> Rust and WASM</a></li><li class="chapter-item expanded "><a href="bindgen.html"><strong aria-hidden="true">7.</strong> wasm-pack</a></li><li class="chapter-item expanded "><a href="gol-copy.html"><strong aria-hidden="true">8.</strong> Simple Game of Life</a></li><li class="chapter-item expanded "><a href="gol-direct.html"><strong aria-hidden="true">9.</strong> Better Game of Life</a></li><li class="chapter-item expanded "><a href="interop.html"><strong aria-hidden="true">10.</strong> Interoperability</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Web Development</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="javascript"><a class="header" href="#javascript">JavaScript</a></h1>
<p>All web browsers contain a JavaScript execution environment to run scripts
that program the dynamic behavior of web pages.
Example behaviors are accepting user input or recognizing a button press.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;h2&gt;What Can JavaScript Do?&lt;/h2&gt;

&lt;p&gt;JavaScript can change HTML attribute values.&lt;/p&gt;

&lt;p&gt;In this case JavaScript changes the value of the src (source) attribute of an image.&lt;/p&gt;

&lt;button onclick=&quot;document.getElementById('myImage').src='pic_bulbon.gif'&quot;&gt;Turn on the light&lt;/button&gt;

&lt;img id=&quot;myImage&quot; src=&quot;pic_bulboff.gif&quot; style=&quot;width:100px&quot;&gt;

&lt;button onclick=&quot;document.getElementById('myImage').src='pic_bulboff.gif'&quot;&gt;Turn off the light&lt;/button&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Try it <a href="https://www.w3schools.com/js/js_intro.asp">here</a></p>
<p>In this example, <code>button</code> is an HTML element, and <code>onclick</code> is the Javascript
code that is called when the button is pressed.</p>
<p>The callback code accesses the element with <code>id=&quot;myImage&quot;</code> and changes the <code>src</code>
field of the struct.</p>
<h2 id="web-apis"><a class="header" href="#web-apis">Web APIs</a></h2>
<p>The browser runtime environments are <em>sandboxed</em>, which means the scripts
access to the host environment is carefully controlled. However, the scripts
do have access to the Web APIs in the runtime environment, and this is how all
the work gets done.</p>
<img src="img/JS_runtime_4.png" alt="browser runtime">
<p>From: [https://www.freecodecamp.org/news/javascript-engine-and-runtime-explained/]</p>
<h3 id="exploring-web-apis"><a class="header" href="#exploring-web-apis">Exploring Web APIs</a></h3>
<p>Let's explore the <code>canvas</code> and <code>img</code> elements.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;canvas id=&quot;myCanvas&quot; width=&quot;400&quot; height=&quot;200&quot; style=&quot;border:1px solid #000000;&quot;&gt;
      Your browser does not support the HTML canvas tag.
    &lt;/canvas&gt;

    &lt;script&gt;
      var canvas = document.getElementById(&quot;myCanvas&quot;);
      var context = canvas.getContext(&quot;2d&quot;);

      context.fillStyle = &quot;blue&quot;;
      context.strokeRect(10, 10, canvas.width-10, canvas.height-10);

      canvas.addEventListener('click', clickReporter, false);

      function clickReporter(event) {
          const rect = canvas.getBoundingClientRect()
          const x = event.clientX - rect.left
          const y = event.clientY - rect.top
          console.log(&quot;x: &quot; + x + &quot; y: &quot; + y)
      }

      canvas.addEventListener('click', clickReporter, false);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The canvas looks like it could be useful. Let's try to load some images:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script&gt;
      var CardNames = ['images/ace_of_clubs.png',
                 'images/6_of_clubs.png',
                 'images/jack_of_clubs.png',
                 'images/king_of_clubs.png'
                ];

      CardNames.forEach(function(path) {
          var img = document.createElement('img');
          img.src = path;
          img.alt = path;
          document.body.appendChild(img);
      });      
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Hmm, the cards look good, but they're too big. Let's try to scale them down.</p>
<pre><code class="language-javascript">function resizeImage(image, maxSize) {
    var icanvas = document.createElement('canvas');
    var width = image.width;
    var height = image.height;

    // Calculate the new dimensions, maintaining the aspect ratio
    if (height &gt; width) {
        width *= maxSize / height;
        height = maxSize;
    }
    else {
        height *= maxSize / width;
        width = maxSize;
    }

    // Set the canvas dimensions to the new dimensions
    icanvas.width = width;
    icanvas.height = height;

    // Draw the resized image on the canvas
    var ctx = icanvas.getContext('2d');

    ctx.drawImage(image, 0, 0, width, height);

    ctx.fillStyle = &quot;black&quot;;
    ctx.strokeRect(0, 0, width-1, height-1);

    document.body.appendChild(icanvas);
}
</code></pre>
<p>Let's put the canvas and the image together:</p>
<pre><code class="language-javascript">var canvas;
var context;

var Cards = new Array();
var next = 0;

function getCursorPosition(event) {
    const rect = canvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    console.log(&quot;x: &quot; + x + &quot; y: &quot; + y + &quot; next: &quot; + next);

    context.drawImage(Cards[next], x, y);
    next = next + 1;
    if (next &gt;= 4) {
        next = 0;
    }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="www.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="server.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="www.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="server.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
